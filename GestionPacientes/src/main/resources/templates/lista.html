<!--
=========================================================
* Material Dashboard 2 - v3.0.0
=========================================================

* Product Page: https://www.creative-tim.com/product/material-dashboard
* Copyright 2021 Creative Tim (https://www.creative-tim.com)
* Licensed under MIT (https://www.creative-tim.com/license)
* Coded by Creative Tim

=========================================================

* The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">

<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0"
	crossorigin="anonymous">
<!-- JavaScript Bundle with Popper -->
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.min.js"
	integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
	crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.js"
	integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
	crossorigin="anonymous"></script>

<title>Gestión de pacientes</title>

<!-- Fonts -->
<link
	href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"
	rel="stylesheet">

<!-- Icons -->
<link href="assets/css/nucleo-icons.css" rel="stylesheet" />
<link href="assets/css/nucleo-svg.css" rel="stylesheet" />

<!-- Font Awesome Icons -->
<script src="https://kit.fontawesome.com/42d5adcbca.js"
	crossorigin="anonymous"></script>
<!-- Material Icons -->
<link
	href="https://fonts.googleapis.com/icon?family=Material+Icons+Round"
	rel="stylesheet">

<!-- CSS Files -->
<link id="pagestyle" href="assets/css/material-dashboard.css"
	rel="stylesheet" />

<!--  DATATABLES -->
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/v/bs5/dt-1.11.5/b-2.2.2/b-html5-2.2.2/datatables.min.css" />


</head>
<body class="g-sidenav-show  bg-gray-200">

	<!-- [*** MENÚ LATERAL *** -->
	<aside
		class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 bg-gradient-secondary"
		id="sidenav-main">
		<div class="sidenav-header">
			<i
				class="fas fa-times p-3 cursor-pointer text-white opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
				aria-hidden="true" id="iconSidenav"></i> <a class="navbar-brand m-0"
				href="https://sites.google.com/d/1t6nN26HIvj_5hdpn3WOICWU6ABfMKcu1/p/19F7l31LPUFrhlN0v10zzXqBD3RO02cch/edit"
				target="_blank"> <img src="./assets/img/ClobaLogoRosa.png"
				class="navbar-brand-img h-100" alt="main_logo"> <span
				class="ms-1 font-weight-bold text-white">Cloba Psicología</span>
			</a>
		</div>
		<hr class="horizontal light mt-0 mb-2">
		<div class="collapse navbar-collapse  w-auto  max-height-vh-100"
			id="sidenav-collapse-main">
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link text-white"
					th:href="@{/index}">
						<div
							class="text-white text-center me-2 d-flex align-items-center justify-content-center">
							<i class="material-icons opacity-10">home</i>
						</div> <span class="nav-link-text ms-1">Inicio</span>
				</a></li>
				<li class="nav-item"><a
					class="nav-link text-white active bg-gradient-primary"
					th:href="@{/lista}">
						<div
							class="text-white text-center me-2 d-flex align-items-center justify-content-center">
							<i class="material-icons opacity-10">list</i>
						</div> <span class="nav-link-text ms-1">Listado</span>
				</a></li>
				<li class="nav-item"><a class="nav-link text-white "
					th:href="@{/crear}">
						<div
							class="text-white text-center me-2 d-flex align-items-center justify-content-center">
							<i class="material-icons opacity-10">person_add</i>
						</div> <span class="nav-link-text ms-1">Nuevo paciente</span>
				</a></li>
			</ul>
		</div>
	</aside>

	<main
		class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
		<!-- Navbar -->
		<nav
			class="navbar navbar-main navbar-expand-lg px-0 mx-4 shadow-none border-radius-xl"
			id="navbarBlur" navbar-scroll="true">
			<div class="container-fluid py-1 px-3">
				<nav aria-label="breadcrumb">
					<ol
						class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
						<li class="breadcrumb-item text-sm"><a
							class="opacity-5 text-dark" th:href="@{/index}">Inicio</a></li>
						<li class="breadcrumb-item text-sm text-dark active"
							aria-current="page">Listado</li>
					</ol>
				</nav>
			</div>
		</nav>
		<!-- End Navbar -->
		<div>
			<h4 class="text-center">Listado de pacientes</h4>
			<br />
		</div>

		<div class="card">
			<div class="table-responsive">
				<table class="table align-items-center mb-0 datatable table-striped"
					id="datatable">
					<thead>
						<tr>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">id</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15 ">nombre</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">apellidos</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">edad</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">teléfono</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">email</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">direccion</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">población</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">ciudad</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">fecha
								alta</th>
							<th
								class="text-center text-uppercase text-secondary text-xs font-weight-bolder opacity-15">terapeuta</th>
							<th class="text-secondary opacity-1"></th>
							<th class="text-secondary opacity-1"></th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="paciente,status:${pacientes}">
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.id}">Id</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.nombre}">Nombre</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.apellidos}">Apellidos</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.edad}">Edad</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.telefono}">Teléfono</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.email}">Email</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.direccion}">Dirección</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.poblacion}">Población</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.ciudad}">Ciudad</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.fecha_alta}">Fecha de alta</td>
							<td class="text-center text-xs font-weight-bold mb-0"
								th:text="${paciente.terapeuta}">Terapeuta</td>


							<td class="align-middle"><a
								th:href="@{/modificar(id=${paciente.id})}"
								class="btn btn-icon btn-2 btn-info" data-toggle="tooltip"
								data-original-title="Edit user"> <span
									class="btn-inner--icon"> <i class="material-icons">edit_note</i></span>
							</a></td>
							<td class="align-middle">
								<!-- Button trigger modal -->
								<button type="button" class="btn btn-icon btn-2 btn-danger"
									data-bs-toggle="modal"
									th:data-bs-target="'#userModal'+${status.index}">
									<span class="btn-inner--icon"> <i class="material-icons">person_remove</i></span>
								</button> <!-- Modal -->
								<div class="modal fade" th:id="'userModal'+${status.index}"
									tabindex="-1" aria-labelledby="exampleModalLabel"
									aria-hidden="true">
									<div class="modal-dialog modal-dialog-centered" role="document">
										<div class="modal-content">

											<div class="modal-header">
												<h5 class="modal-title font-weight-normal"
													id="exampleModalLabel">¿Eliminar paciente?</h5>
												<button type="button" class="btn-close text-dark"
													data-bs-dismiss="modal" aria-label="Close">
													<span aria-hidden="true">&times;</span>
												</button>
											</div>
											<div class="modal-body">
												<p
													th:text="'Eliminarás al paciente ' + ${paciente.nombre} + ' ' + ${paciente.apellidos}"></p>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn bg-gradient-secondary"
													data-bs-dismiss="modal">Cancelar</button>
												<a class="btn bg-gradient-primary"
													th:href="@{/eliminar(id=${paciente.id})}">Eliminar</a>
											</div>

										</div>
									</div>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>

		<div class="container-fluid py-4">
			<footer class="footer py-4  ">
				<div class="container-fluid">
					<div class="row align-items-center justify-content-lg-between">
						<div class="col-lg-6 mb-lg-0 mb-4">
							<div
								class="copyright text-center text-sm text-muted text-lg-start">
								©
								<script>
									document.write(new Date().getFullYear())
								</script>
								, made with <i class="fa fa-heart"></i> by Cristina López.
							</div>
						</div>
					</div>
				</div>
			</footer>
		</div>
	</main>

	<!-- Core -->
	<script src="../assets/js/core/popper.min.js"></script>
	<script src="../assets/js/core/bootstrap.min.js"></script>

	<!-- Theme JS -->
	<script src="../assets/js/material-dashboard.min.js"></script>

	<!--  DataTables JS -->
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/pdfmake.min.js"></script>
	<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.36/vfs_fonts.js"></script>
	<script type="text/javascript"
		src="https://cdn.datatables.net/v/bs5/dt-1.11.5/b-2.2.2/b-html5-2.2.2/datatables.min.js"></script>
	<!-- <script type="text/javascript"
		src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>-->

	<script>
		$(document).ready(function() {
			$('#datatable').DataTable({
				"language": {
					"search": "Buscar:",
	                "zeroRecords": "No se encontraron datos",
	                "infoEmpty": "No hay datos para mostrar",
	                "infoFiltered": "filtrado/s",
	                "lengthMenu": "Mostrando _MENU_ paciente/s",
	                "info": "Mostrando del _START_ al _END_ de _TOTAL_ paciente/s",
	                "paginate": {
	                    "next": ">",
	                    "previous": "<"
	                },
	            
                },
                "ordering": false,
                "lengthMenu": [5, 10, 25, 50, 75, 100],
            });
            
		});
	</script>

</body>
</html>